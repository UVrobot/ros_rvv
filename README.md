# ros_rvv
ROS Robot View Visualization

<img src="https://raw.githubusercontent.com/gstavrinos/ros_rvv/master/media/ros_rvv_demo3.gif" width=100%>
<img src="https://raw.githubusercontent.com/gstavrinos/ros_rvv/master/media/ros_rvv_demo.gif" width=100%>
<img src="https://raw.githubusercontent.com/gstavrinos/ros_rvv/master/media/ros_rvv_demo2.gif" width=100%>

# What is this package?
ros_rvv is used to visualize robot view angles and viewed areas. This is achieved by utilizing the `Range`, `OccupancyGrid` and `PointCloud2` message types. Note: The `Range`, `OccupancyGrid` and `PointCloud2` messages generated by this package should not be used as sensor or navigation messages. They are purely for visualization purposes.

# How does it work?
ros_rvv takes a list of parameters to allow you to configure it based on your robot and needs. The main functionality is based on the field of view (fov) specified for a frame (i.e. "camera_frame") and the time needed to consider an area as "viewed". This can be instant (exactly the time an area of the map gets inside the fov) or after an arbitrary number of seconds.

# Parameters
`/ros_rvv/frame`: The source frame of the FOV (the origin of the `Range` message).

`/ros_rvv/field_of_view`: The FOV in radians.

`/ros_rvv/range`: The maximum range that the robot can see in meters.

`/ros_rvv/range_rate`: The publish rate of the fov message in Hz.

`/ros_rvv/fov_pub_topic`: The topic that the fov message is published.

`/ros_rvv/radiation_type`: This should most probably not be useful, since it configures the radiation type of the Range message (0 for ultrasound, 1 for IR).


`/ros_rvv/publish_area`: A boolean that activates/deactivates the publication of the occupancy grid viewed area.

`/ros_rvv/map_sub_topic`: The topic from which to read the map. Currently, the only use of that map is to use its dimensions.

`/ros_rvv/map_pub_topic`: The topic that the viewed area is published to.

`/ros_rvv/latched_map`: Set this to false if the map message changes, else, the node will listen to it only once and then unsubscribe.



`/ros_rvv/publish_area_as_pc2`: A boolean that activates/deactivates the publication of the viewed area as a pointcloud.

`/ros_rvv/pc2_sub_topic`: The topic from which to read the pointcloud map.

`/ros_rvv/pc2_pub_topic`: The topic that the pointcloud viewed area is published to.

`/ros_rvv/latched_cloud`: Set this to false if the pointcloud map message changes, else, the node will listen to it only once and then unsubscribe.

`/ros_rvv/cloud_mapping`: A boolean that defines whether the map is static or constantly changing (running a mapping procedure e.g. octomap_mapping)

`/ros_rvv/default_cloud_colour`: The colour of the cloud points when not viewed at all.


`/ros_rvv/cloud_viewed_channel`: The colour channel that represents the viewing-scale of each point. Possible values are "r", "g" and "b".

`/ros_rvv/viewed_area_calculation_expression`: User-defined mathematical expression that is used to calculate the viewed area. It *must* include a `dt` variable which is the time difference and optionally an `r` variable which is the range. As an example, the user can use the "3\*dt/math.pow(*r,4)" string as an input. Currently supported only by pointcloud viewed area representation (not occupancy grid).


`/ros_rvv/max_time`: The time in seconds after which, the area is considered fully viewed. (<=0 for instant viewed areas)
